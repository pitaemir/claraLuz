{% extends "base.html" %}
{% block title %}ClaraLuz — Atualização de Lattes{% endblock %}

{% block content %}
  <!-- Hero -->
  <section class="relative">
    <div class="absolute inset-0 -z-10 bg-gradient-to-b from-white via-slate-50 to-slate-100"></div>

    <div class="mx-auto max-w-6xl px-4 py-14 md:py-20">
      <div class="grid items-center gap-10 md:grid-cols-2">
        <div>
          <h1 class="text-4xl font-extrabold tracking-tight md:text-5xl">
            Atualize seu Lattes com um processo simples e organizado
          </h1>
          <p class="mt-4 text-lg text-slate-600">
            Faça a solicitação, envie os documentos e acompanhe o status. Em poucos minutos você conclui o pedido.
          </p>

          <div class="mt-6 flex flex-col gap-3 sm:flex-row">
            <a href="{% url 'request_lattes' %}"
               class="inline-flex items-center justify-center rounded-xl bg-slate-900 px-6 py-3 text-base font-semibold text-white hover:bg-slate-800">
              Fazer solicitação
            </a>
            <a href="#como-funciona"
               class="inline-flex items-center justify-center rounded-xl border border-slate-300 px-6 py-3 text-base font-semibold text-slate-900 hover:bg-white">
              Ver como funciona
            </a>
          </div>

          <!-- Social proof (estilo “logo bar”) -->
          <div class="mt-8">
            <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">
              Confiável para organizar seus envios
            </p>
            <div class="mt-3 grid grid-cols-3 gap-3 text-xs text-slate-500 sm:grid-cols-5">
              <div class="rounded-lg border border-slate-200 bg-white px-3 py-2 text-center">PDF</div>
              <div class="rounded-lg border border-slate-200 bg-white px-3 py-2 text-center">Imagem</div>
              <div class="rounded-lg border border-slate-200 bg-white px-3 py-2 text-center">WhatsApp</div>
              <div class="hidden sm:block rounded-lg border border-slate-200 bg-white px-3 py-2 text-center">E-mail</div>
              <div class="hidden sm:block rounded-lg border border-slate-200 bg-white px-3 py-2 text-center">Status</div>
            </div>
          </div>
        </div>

        <!-- Card visual (mock) -->
        <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
          <div class="flex items-center justify-between">
            <p class="font-semibold">Pedido CL-XXXXXXX</p>
            <span class="rounded-full bg-amber-100 px-3 py-1 text-xs font-semibold text-amber-900">NOVO</span>
          </div>
          <div class="mt-4 space-y-3">
            <div class="rounded-xl border border-slate-200 p-4">
              <p class="text-sm font-semibold">Documentos</p>
              <p class="text-sm text-slate-600">Diploma.pdf • Histórico.jpg • Certificados.pdf</p>
            </div>
            <div class="rounded-xl border border-slate-200 p-4">
              <p class="text-sm font-semibold">Próximo passo</p>
              <p class="text-sm text-slate-600">Enviar arquivos e acompanhar o status.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Consulta de pedido (CÓDIGO + EMAIL) -->
  <section class="py-12 bg-white border-t border-slate-200">
    <div class="mx-auto max-w-4xl px-4">
      <div class="rounded-2xl border border-slate-200 p-6 shadow-sm">
        <div class="flex flex-col gap-2">
          <h2 class="text-xl font-semibold">Consultar pedido</h2>
          <p class="text-slate-600 text-sm">
            Já fez uma solicitação? Digite o <strong>código do pedido</strong> (ex: CL-8F3K2Q9A) e o e-mail utilizado.
          </p>
        </div>

        <form method="post" class="mt-6 grid gap-4 md:grid-cols-3">
          {% csrf_token %}
          <input type="hidden" name="form_name" value="lookup">

          <div>
            <label class="text-sm font-medium text-slate-700">Código do pedido</label>
            <div class="mt-1">
              {{ lookup_form.public_id }}
            </div>
            <div class="mt-1 text-sm text-red-600">{{ lookup_form.public_id.errors }}</div>
          </div>

          <div>
            <label class="text-sm font-medium text-slate-700">E-mail</label>
            <div class="mt-1">
              {{ lookup_form.email }}
            </div>
            <div class="mt-1 text-sm text-red-600">{{ lookup_form.email.errors }}</div>
          </div>

          <div class="flex items-end">
            <button
              class="w-full rounded-xl bg-slate-900 px-4 py-2 text-white font-semibold hover:bg-slate-800"
              type="submit">
              Ver status
            </button>
          </div>
        </form>

        {% if lookup_error %}
          <div class="mt-4 rounded-lg bg-red-50 border border-red-200 p-3 text-red-700 text-sm">
            {{ lookup_error }}
          </div>
        {% endif %}

        {% if lookup_result %}
          <div class="mt-4 rounded-lg bg-green-50 border border-green-200 p-4">
            <div class="flex justify-between items-center flex-wrap gap-2">
              <div>
                <div class="font-semibold">Pedido {{ lookup_result.public_id }}</div>
                <div class="text-sm text-slate-600">{{ lookup_result.full_name }}</div>
                <div class="text-xs text-slate-500 mt-1">
                  Documentos enviados: {{ lookup_result.documents.count }}
                </div>
              </div>

              <span class="rounded-full bg-slate-900 text-white px-3 py-1 text-xs font-semibold">
                {{ lookup_result.get_status_display }}
              </span>
            </div>
          </div>
        {% endif %}
      </div>
    </div>
  </section>

  <script>
    // Aplica classes Tailwind apenas nos inputs do form de consulta
    const lookupForm = document.querySelector("form input[name='form_name'][value='lookup']")?.closest("form");
    if (lookupForm) {
      lookupForm.querySelectorAll("input").forEach(el => {
        el.classList.add(
          "w-full", "rounded-xl", "border", "border-slate-300",
          "px-3", "py-2", "text-slate-900", "placeholder-slate-400",
          "focus:outline-none", "focus:ring-2", "focus:ring-slate-400"
        );
      });
    }
  </script>

  <!-- Como funciona (3 passos) -->
  <section id="como-funciona" class="mx-auto max-w-6xl px-4 py-14">
    <div class="max-w-2xl">
      <h2 class="text-2xl font-bold">Como funciona</h2>
      <p class="mt-2 text-slate-600">Um fluxo em 3 etapas.</p>
    </div>

    <div class="mt-8 grid gap-4 md:grid-cols-3">
      <div class="rounded-2xl border border-slate-200 bg-white p-6">
        <p class="text-sm font-semibold text-slate-500">Passo 1</p>
        <h3 class="mt-2 text-lg font-bold">Preencha a solicitação</h3>
        <p class="mt-2 text-slate-600">Nome, e-mail e WhatsApp para contato e identificação do pedido.</p>
      </div>

      <div class="rounded-2xl border border-slate-200 bg-white p-6">
        <p class="text-sm font-semibold text-slate-500">Passo 2</p>
        <h3 class="mt-2 text-lg font-bold">Envie os documentos</h3>
        <p class="mt-2 text-slate-600">Anexe PDFs/imagens e descreva o que cada arquivo representa.</p>
      </div>

      <div class="rounded-2xl border border-slate-200 bg-white p-6">
        <p class="text-sm font-semibold text-slate-500">Passo 3</p>
        <h3 class="mt-2 text-lg font-bold">Finalize e acompanhe</h3>
        <p class="mt-2 text-slate-600">Seu pedido fica registrado com status (novo, em andamento, concluído).</p>
      </div>
    </div>

    <div class="mt-8">
      <a href="{% url 'request_lattes' %}"
         class="inline-flex items-center justify-center rounded-xl bg-slate-900 px-6 py-3 text-base font-semibold text-white hover:bg-slate-800">
        Começar agora
      </a>
    </div>
  </section>

  <!-- Benefícios (cards) -->
  <section id="beneficios" class="bg-white border-y border-slate-200">
    <div class="mx-auto max-w-6xl px-4 py-14">
      <h2 class="text-2xl font-bold">Por que usar?</h2>

      <div class="mt-8 grid gap-4 md:grid-cols-2">
        <div class="rounded-2xl border border-slate-200 p-6">
          <h3 class="font-bold">Envio centralizado</h3>
          <p class="mt-2 text-slate-600">Tudo num único pedido, sem perder arquivos em conversas diferentes.</p>
        </div>
        <div class="rounded-2xl border border-slate-200 p-6">
          <h3 class="font-bold">Organização por tipo</h3>
          <p class="mt-2 text-slate-600">Classifique documentos e descreva o conteúdo para evitar retrabalho.</p>
        </div>
        <div class="rounded-2xl border border-slate-200 p-6">
          <h3 class="font-bold">Status do pedido</h3>
          <p class="mt-2 text-slate-600">Novo → Em andamento → Concluído, de forma simples.</p>
        </div>
        <div class="rounded-2xl border border-slate-200 p-6">
          <h3 class="font-bold">Experiência “clean”</h3>
          <p class="mt-2 text-slate-600">Interface leve, foco no CTA e leitura fácil.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq" class="mx-auto max-w-6xl px-4 py-14">
    <h2 class="text-2xl font-bold">Perguntas frequentes</h2>

    <div class="mt-6 space-y-3">
      <details class="rounded-2xl border border-slate-200 bg-white p-5">
        <summary class="cursor-pointer font-semibold">Que tipos de arquivo posso enviar?</summary>
        <p class="mt-2 text-slate-600">PDF e imagens (JPG/PNG). Dá pra expandir depois.</p>
      </details>

      <details class="rounded-2xl border border-slate-200 bg-white p-5">
        <summary class="cursor-pointer font-semibold">Preciso criar conta?</summary>
        <p class="mt-2 text-slate-600">Não. Você cria um pedido e envia os docs por esse link.</p>
      </details>

      <details class="rounded-2xl border border-slate-200 bg-white p-5">
        <summary class="cursor-pointer font-semibold">Como acompanho o status?</summary>
        <p class="mt-2 text-slate-600">O sistema registra o status do seu pedido.</p>
      </details>
    </div>
  </section>
{% endblock %}
